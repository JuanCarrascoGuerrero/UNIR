<section class="mt-3 mx-auto formulario">
  <h1>Formulario tipo Model</h1>

  <!--ESTADO DEL FORMULARIO: Ver final del TS...-->
  <p>{{ userForm.valid }}</p>
  <!--Paso 2 y 3 de la receta-->
  <form [formGroup]="userForm" (ngSubmit)="getDataForm()">
    <!--PASO 4 en todos los inputs-->
    <div>
      <label class="form-label" for="nombre">Nombre</label>
      <input
        class="form-control"
        type="text"
        id="nombre"
        placeholder="Introduce nombre"
        formControlName="nombre"
      />

      <!--Condicional + FormModule Validators tool-->
      @if(userForm.get('nombre')?.hasError('required') &&
      userForm.get('nombre')?.touched){
      <!--Atento al uso de estado del formulario-->
      <p class="error">El campo es obligatorio</p>
      }
      <!--errores siempre en minuscula -- minLength -> minlength-->
      @if(userForm.get('nombre')?.hasError('minlength') &&
      userForm.get('nombre')?.touched){
      <p class="error">La longitud minima es 3</p>
      }

      <!--ATENCION, parece que el if va a ser comun para todo menos los tipos de errores y el id de la variable...-->
      <!--CLAAAAAARO -- creamos funcion en TS  Mira en adelante funcion checkControl()-->
    </div>
    <div>
      <label class="form-label" for="edad">Edad</label>
      <input
        class="form-control"
        type="number"
        id="edad"
        placeholder="Introduce edad"
        formControlName="edad"
      />
      <!--Al ser framework y no JS a pelo... respeta el tipado en el envio de datos! Este es enviado tipo number-->
      @if(checkControl('edad','min')){
      <!--Atento al uso de estado del formulario-->
      <p class="error">Edad mínima 18</p>
      }
      <!--errores siempre en minuscula -- minLength -> minlength-->
      @if(checkControl('edad','max')){
      <p class="error">Edad máxima 65</p>
      }
    </div>

    <!--Para DNI vamos a crear nustro propio validador dniValidator-->
    <div>
      <label class="form-label" for="dni">DNI</label>
      <input
        class="form-control"
        type="text"
        id="dni"
        placeholder="Introduce dni"
        formControlName="dni"
      />

      @if(checkControl('dni','dniValidator')){
      <!-- del campo dni pintame los errores de tipo dniValidator -->
      <p class="error">{{userForm.get('dni')?.errors?.['dniValidator']}}</p>
      }
    </div>
    <div>
      <label class="form-label" for="email">Email</label>
      <input
        class="form-control"
        type="text"
        id="email"
        placeholder="Introduce email"
        formControlName="email"
      />
      @if(checkControl('email','required')){
      <!--Atento al uso de estado del formulario-->
      <p class="error">El email es obligatorio</p>
      }
      <!--errores siempre en minuscula -- minLength -> minlength-->
      @if(checkControl('email','email')){
      <p class="error">El email tiene que ser valido</p>
      }
    </div>
    <div>
      <label class="form-label" for="password">Password</label>
      <input
        class="form-control"
        type="password"
        id="password"
        placeholder="Introduce password"
        formControlName="password"
      />
      @if(checkControl('password','required')){
      <p class="error">El campo password es obligatorio</p>
      } @if(checkControl('password','minlength')){
      <p class="error">Longitud mínima de 8</p>
      }
      <!--errores siempre en minuscula -- minLength -> minlength-->
      @if(checkControl('password','maxlength')){
      <p class="error">Longitud máxima de 16</p>
      }
    </div>
    <div>
      <label class="form-label" for="repitepassword">Repite Password</label>
      <input
        class="form-control"
        type="password"
        id="repitepassword"
        placeholder="Repite password"
        formControlName="repitepassword"
      />
           @if(userForm.hasError('passwordValidator')){
      <!-- del campo dni pintame los errores de tipo dniValidator -->
      <p class="error">Los campos de password no coinciden</p>
      }
    </div>
    <div>
      <!--PROPERTY BINDING BOTON-->
      <input
        type="submit"
        value="Enviar"
        class="btn btn-success mt-2"
        [disabled]="userForm.invalid"
      />
    </div>
  </form>
</section>
